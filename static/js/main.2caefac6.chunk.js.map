{"version":3,"sources":["App.js","index.js"],"names":["App","curPage","state","isLoaded","opportunities","page","totPages","scrolling","editOpData","id","title","description","editOpModal","handleScroll","e","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","pageYOffset","loadMore","refreshOpList","perPage","console","log","req","axios","get","then","response","setState","data","paging","total_pages","prevState","this","scrollListner","addEventListener","style","position","top","left","Spinner","width","height","type","color","map","opportunity","key","src","profile_photo_urls","thumb","alt","location","Button","size","className","onClick","editOpportunity","bind","Modal","isOpen","toggle","toggleEditOpModal","ModalHeader","ModalBody","FormGroup","Label","for","Input","value","onChange","target","ModalFooter","updateOpportunity","Jumbotron","Table","dark","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2caefac6.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Input, FormGroup, Label, Table, Modal, ModalHeader, ModalBody, ModalFooter, Button, Spinner, Jumbotron } from 'reactstrap';\n\n\nclass App extends Component {\n\n  curPage = 1;\n  state = {\n\n\n    isLoaded: false,\n\n    opportunities: [],\n\n    page: 1,\n    totPages: null,\n    scrolling: false,\n\n    editOpData: {\n      id: '',\n      title: '',\n      description: ''\n    },\n    editOpModal: false\n  }\n\n  componentDidMount() {\n    this.refreshOpList();\n    //Scroll Listener\n    this.scrollListner = window.addEventListener('scroll', (e) => {\n      this.handleScroll(e)\n    })\n  }\n\n  //Infinite scroll function\n  handleScroll = (e) => {\n    const { scrolling, totPages, page } = this.state\n    if (scrolling) return\n    if (totPages <= page) return\n\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = windowHeight + window.pageYOffset;\n    if (windowBottom >= docHeight) {\n      this.loadMore()\n    } else {\n      return\n    }\n  }\n\n  toggleEditOpModal() {\n    this.setState({\n      editOpModal: !this.state.editOpModal\n    });\n\n\n  }\n\n  //Editing opportunity data\n  updateOpportunity() {\n\n\n    ///https://api-staging.aiesec.org/v2/opportunities/8329?access_token=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c&api_key=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c\n\n    /* \n        let { title, location} = this.state.editOpData;\n        let req = 'https://api-staging.aiesec.org/v2/opportunities/';\n        let key = '?api_key=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c';//////////////000000\n        console.log(req + this.state.editOpData.id);\n        axios.patch(req + this.state.editOpData.id + key, {\n          title, location\n    \n        }).then((response) => {\n          this.refreshOpList();\n        }); \n    */\n    this.setState({\n      editOpModal: false, editOpData: { id: '', title: '', description: '' }\n    })\n\n\n  }\n\n  //PATCH request for editing opportunity data\n  editOpportunity(id, title) {\n\n    let reqInfo = 'https://api-staging.aiesec.org/v2/opportunities/';\n    let accTok = '?access_token=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c';\n\n    axios.get(reqInfo + id + accTok).then((response) => {\n      let description = response.data.description;\n      this.setState({\n        editOpData: { id, title, description }, editOpModal: !this.state.editOpModal\n      });\n    })\n\n  }\n\n  //Requesting data - GET\n  refreshOpList = () => {\n    const { opportunities, perPage, page } = this.state\n    console.log(page);\n    const req = 'https://api-staging.aiesec.org/v2/opportunities?access_token=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c&page=' + page\n    axios.get(req).then((response) => {\n      this.setState({\n        opportunities: [...opportunities, ...response.data.data],\n        scrolling: false,\n        totPages: response.data.paging.total_pages,\n        isLoaded: true\n      })\n    })\n\n  }\n\n\n  loadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n      scrolling: true\n    }), this.refreshOpList)\n\n  }\n\n\n  render() {\n    var isLoaded = this.state.isLoaded;\n    if (!isLoaded) {\n      let style = {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n      };\n      return <div style={style}><Spinner style={{ width: '5rem', height: '5rem' }} type=\"grow\" color=\"primary\" />      </div>;\n    }\n\n    //Displaying loaded data to the browser\n    let opportunities = this.state.opportunities.map((opportunity) => {\n      return (\n\n\n        <tr key={opportunity.id}>\n          <td><img src={opportunity.profile_photo_urls.thumb} alt=\"Pic\" /></td>\n          <td>{opportunity.id}</td>\n          <td>{opportunity.title}</td>\n          <td>{opportunity.location}</td>\n          <td>\n            <Button color=\"primary\" size=\"sm\" className=\"mr-2\" onClick={this.editOpportunity.bind(this, opportunity.id, opportunity.title)}>Edit</Button>\n          </td>\n        </tr>\n\n      )\n    });\n    return (\n\n      <div className=\"App container\">\n\n        {/* Edit data modal */}\n        <Modal isOpen={this.state.editOpModal} toggle={this.toggleEditOpModal.bind(this)}>\n          <ModalHeader toggle={this.toggleEditOpModal.bind(this)}>Edit Opportunity</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"title\">Title</Label>\n              <Input id=\"title\" value={this.state.editOpData.title} onChange={(e) => {\n\n                let { editOpData } = this.state;\n\n                editOpData.title = e.target.value;\n\n                this.setState({ editOpData });\n\n              }} />\n            </FormGroup>\n\n\n            <FormGroup>\n              <Label for=\"description\">Description</Label>\n              <Input id=\"description\" value={this.state.editOpData.description} onChange={(e) => {\n\n                let { editOpData } = this.state;\n\n                editOpData.description = e.target.value;\n                console.log(editOpData.description);\n                this.setState({ editOpData });\n\n              }} />\n\n            </FormGroup>\n\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.updateOpportunity.bind(this)}>Update Opportunity</Button>{' '}\n            <Button color=\"secondary\" onClick={this.toggleEditOpModal.bind(this)}>Cancel</Button>\n          </ModalFooter>\n        </Modal>\n\n        <Jumbotron>\n          <h1 className=\"display-3\">AIESEC Opportunities Portal</h1>\n          <p className=\"lead\">This is project created by Ravidu Silva</p>\n          <p className=\"lead\">Email - ravidu.silva@aiesec.net</p>\n          <hr className=\"my-2\" />\n          <br></br>\n          <Table dark className=\"opportunities\">\n            <thead>\n              <tr>\n                <th>Pic</th>\n                <th>Number</th>\n                <th>Title</th>\n                <th>Location</th>\n                <th>Controls</th>\n              </tr>\n            </thead>\n            <tbody>\n\n              {opportunities}\n\n              {}\n            </tbody>\n          </Table>\n\n        </Jumbotron>\n\n\n\n        <Modal isOpen={this.state.scrolling}>\n\n          <ModalHeader>Loading Opportunities...</ModalHeader>\n\n\n        </Modal>\n\n\n      </div>\n\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}