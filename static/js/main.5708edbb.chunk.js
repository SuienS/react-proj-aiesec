(window["webpackJsonpreact-proj-aiesec"]=window["webpackJsonpreact-proj-aiesec"]||[]).push([[0],{34:function(e,t,a){e.exports=a(68)},40:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),l=a(14),r=a.n(l),o=(a(39),a(40),a(8)),c=a(9),s=a(12),d=a(10),p=a(13),u=a(17),m=a(69),h=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.portal,t=this.props.opp;return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,i.a.createElement("img",{src:t.profile_photo_urls.thumb,alt:"Pic"})),i.a.createElement("td",null,t.id),i.a.createElement("td",null,t.title),i.a.createElement("td",null,t.location),i.a.createElement("td",null,i.a.createElement(m.a,{color:"primary",size:"sm",className:"mr-2",onClick:e.editOpportunity.bind(e,t.id,t.title)},"Edit")))}}]),t}(n.Component),f=a(16),g=a.n(f),E=a(76),O=a(77),v=a(78),b=a(79),y=a(70),j=a(71),k=a(72),w=a(73),M=a(74),C=a(75),D=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"updateOpportunity",value:function(){this.props.portal.setState({editOpModal:!1,editOpData:{id:"",title:"",description:""}})}},{key:"render",value:function(){var e=this.props.portal;return i.a.createElement(b.a,{isOpen:e.state.editOpModal,toggle:e.toggleEditOpModal.bind(e)},i.a.createElement(y.a,{toggle:e.toggleEditOpModal.bind(e)},"Edit Opportunity"),i.a.createElement(j.a,null,i.a.createElement(k.a,null,i.a.createElement(w.a,{for:"title"},"Title"),i.a.createElement(M.a,{id:"title",value:e.state.editOpData.title,onChange:function(t){var a=e.state.editOpData;a.title=t.target.value,e.setState({editOpData:a})}})),i.a.createElement(k.a,null,i.a.createElement(w.a,{for:"description"},"Description"),i.a.createElement(M.a,{id:"description",value:e.state.editOpData.description,onChange:function(t){var a=e.state.editOpData;a.description=t.target.value,console.log(a.description),e.setState({editOpData:a})}}))),i.a.createElement(C.a,null,i.a.createElement(m.a,{color:"primary",onClick:this.updateOpportunity.bind(this)},"Update Opportunity")," ",i.a.createElement(m.a,{color:"secondary",onClick:e.toggleEditOpModal.bind(e)},"Cancel")))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).curPage=1,a.state={isLoaded:!1,opportunities:[],page:1,totPages:null,scrolling:!1,editOpData:{id:"",title:"",description:""},editOpModal:!1},a.handleScroll=function(e){var t=a.state,n=t.scrolling,i=t.totPages,l=t.page;if(!n&&!(i<=l)){var r="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,o=document.body,c=document.documentElement,s=Math.max(o.scrollHeight,o.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight);r+window.pageYOffset>=s&&a.loadMore()}},a.refreshOpList=function(){var e=a.state,t=e.opportunities,n=e.page;console.log(n);var i="https://api-staging.aiesec.org/v2/opportunities?access_token=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c&page="+n;g.a.get(i).then(function(e){a.setState({opportunities:[].concat(Object(u.a)(t),Object(u.a)(e.data.data)),scrolling:!1,totPages:e.data.paging.total_pages,isLoaded:!0})})},a.loadMore=function(){a.setState(function(e){return{page:e.page+1,scrolling:!0}},a.refreshOpList)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.refreshOpList(),this.scrollListner=window.addEventListener("scroll",function(t){e.handleScroll(t)})}},{key:"toggleEditOpModal",value:function(){this.setState({editOpModal:!this.state.editOpModal})}},{key:"editOpportunity",value:function(e,t){var a=this;g.a.get("https://api-staging.aiesec.org/v2/opportunities/"+e+"?access_token=dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c").then(function(n){var i=n.data.description;a.setState({editOpData:{id:e,title:t,description:i},editOpModal:!a.state.editOpModal})})}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded){return i.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%"}},i.a.createElement(E.a,{style:{width:"5rem",height:"5rem"},type:"grow",color:"primary"}),"      ")}var t=this.state.opportunities.map(function(t){return i.a.createElement(h,{opp:t,portal:e,key:t.id})});return i.a.createElement("div",null,i.a.createElement(D,{portal:this}),i.a.createElement(O.a,null,i.a.createElement("h1",{className:"display-3"},"AIESEC Opportunities Portal"),i.a.createElement("p",{className:"lead"},"This is project created by Ravidu Silva"),i.a.createElement("p",{className:"lead"},"Email - ravidu.silva@aiesec.net"),i.a.createElement("hr",{className:"my-2"}),i.a.createElement("br",null),i.a.createElement(v.a,{dark:!0,className:"opportunities"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Pic"),i.a.createElement("th",null,"Number"),i.a.createElement("th",null,"Title"),i.a.createElement("th",null,"Location"),i.a.createElement("th",null,"Controls"))),i.a.createElement("tbody",null,t))),i.a.createElement(b.a,{isOpen:this.state.scrolling},i.a.createElement(y.a,null,"Loading Opportunities...")))}}]),t}(n.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App container"},i.a.createElement(S,null))}}]),t}(n.Component);r.a.render(i.a.createElement(L,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.5708edbb.chunk.js.map